<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>06-理解 Vue 中的生命周期函数</title>
    <script src="https://unpkg.com/vue@next"></script>
  </head>
  <body>
    <div id="root">我是初始化内容</div>
  </body>
  <script>
    // 生命周期函数，在某一个时刻自动执行的函数
    const app = Vue.createApp({
      data() {
        return {
          message: 'hello world',
        }
      },
      // 在实例生成之前
      beforeCreate() {
        console.log('beforeCreate')
      },
      // 在实例生成之后
      created() {
        console.log('created')
      },
      // 在组件内容被编译到页面内容之前立即自动执行的函数
      beforeMount() {
        console.log(document.getElementById('root').innerHTML, 'beforeMount')
      },
      // 在组件内容被渲染到页面之后自动执行的函数
      mounted() {
        console.log(document.getElementById('root').innerHTML, 'mounted')
      },
      // 当data中的数据发生变化时会自动执行
      beforeUpdate() {
        console.log(document.getElementById('root').innerHTML, 'beforeUpdate')
      },
      // 当数据发生变化，页面重新渲染后，会自动执行的函数
      updated() {
        console.log(document.getElementById('root').innerHTML, 'updated')
      },
      // 当 Vue 应用失效时，自动执行的函数
      beforeUnmount() {
        console.log(document.getElementById('root').innerHTML, 'beforeUnmount')
      },
      // 当 Vue 应用失效，且DOM  完全销毁之后，自动执行的函数
      unmounted() {
        console.log(document.getElementById('root').innerHTML, 'unmounted')
      },
      methods: {
        handleClick() {
          this.message += '-1'
        },
        handleUnMount() {
          app.unmount()
        },
      },
      template: `
        <div>
          {{message}}
          <button @click="handleClick">点击改变内容</button>
          <button @click="handleUnMount">点击我卸载app</button>
        </div>
      `,
    })
    const vm = app.mount('#root')
  </script>
</html>
